Syncs Letterboxd data to Plex. Work in progress.

# letterboxd_plex_sync

This is a simple script that I've been working on to take user data from Letterboxd and updating Plex library/user data accordingly.  Currently the code focuses on user ratings, watch history, and user watchlist. 

This code heavily leverages 
 * this Plex API wrapper: https://github.com/pkkid/python-plexapi 
 * this library for downloading Letterboxd user stats: https://github.com/mBaratta96/letterboxd_stats
## Sample Docker Compose
   
    name: letterboxd_plex_sync
    services:
        letterboxd_sync:
            container_name: letterboxd_sync
            restart: unless-stopped
            depends_on:
                - plex
            environment:
                - PUID=1000
                - PGID=1000
                - TZ=US/Mountain
            stdin_open: true
            tty: true    
            env_file:
                - path: ./lb_sync/debug.env
                  required: false  
            volumes:
                # point dir containing config.toml to /root/.config/letterboxd_stats  
                - "~/.config/letterboxd_stats:/root/.config/letterboxd_stats"
                # optionally add in a resources folder to add a pre-generated lb to tmdb mapping CSV file. 
                - "~/lb_sync/resources:/app/resources"
            build: https://github.com/treysullivent/letterboxd_plex_sync.git
            image: letterboxd_plex_sync:dev 

## letterboxd_stats/config.toml

This code hijacks the config.toml used and generated by the letterboxd_stats python library. If you have the library installed on your system, it will likely be at `~/.config/letterboxd_stats/confgi.toml`. 

You will need to add some values 

Run the following command, replacing the values here with your own:
    
    echo -e "\n\
    [Plex]\n\
    baseurl = 'http://%YOUR_PLEX_BASEIP%:%YOUR_PLEX_PORT%'\n\
    token = '%YOUR_PLEX_TOKEN%'\n\
    \n\
    # optional: to use a different user than the default (admin)\n\
    user = '%YOUR_LOCAL_PLEX_USER_NAME%'\n\
    \n\
    # optional: if that user has a PIN\n\
    pin = '%YOUR_LOCAL_USER_PIN%'\n" \
    | sudo tee -a ~/.config/letterboxd_stats/config.toml

At the end your config.toml should look something like this:

    # Where you want the .csv file of your Letterboxd activity to be saved.
    root_folder = "/tmp/"
    
    # The size of the ASCII art poster printed in your terminal when you check the details of a movie. Set to 0 to disable 
    poster_columns = 0
    
    [TMDB]
    api_key = "[%YOUR_TMDB_API_KEY%]"
    
    [Letterboxd]
    username = "%YOUR_LB_USERNAME%"
    password = "%YOUR_LB_PASSWORD%"
       
    # # # # #     NEW SECTION TO FACILITATE PLEX SYNC     # # # # # 
    [Plex]
    baseurl = 'http://%YOUR_PLEX_BASEIP%:%YOUR_PLEX_PORT%'
    token = '%YOUR_PLEX_TOKEN%'
    
    # optional: to use a different user than the default (admin)
    user = '%YOUR_LOCAL_PLEX_USER_NAME%'
    
    # optional: if that user has a PIN
    pin = '%YOUR_LOCAL_USER_PIN%'

